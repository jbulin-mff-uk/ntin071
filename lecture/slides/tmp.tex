
    
    \begin{frame}%{Polynomiální převod $3SAT$ na $CLIQUE$}
    \begin{definition}[SAT, 3SAT]
    Formuli $\phi$ nazveme \alert{3-cnf formule}, pokud je formule výrokové logiky v CNF, kde v každé klauzuli jsou právě tři literály.
    
    Formule \alert{je splnitelná}, pokud existuje takové ohodnocení výrokových proměnných, že je hodnota formule TRUE.
    
    Problém \alert{3SAT} je pro každou 3-cnf formuli rozhodnout, zda je splnitelná, tj.
    $$3SAT=\{\phi \ |\  \phi \hbox{ je splnitelná 3-cnf formule}\}\hbox{.}
    $$
    
    Problém \alert{SAT} je pro každou booleovskou formuli v rozhodnout, zda je splnitelná
    $$SAT=\{\phi \ |\  \phi \hbox{ je splnitelná formule}\}\hbox{.}
    $$
    \end{definition}
    \vspace{-3mm}
    \pause
    \begin{theorem}
        $3SAT$ je polynomiálně převoditelný na $CLIQUE$.
    \end{theorem}
    \vspace{-3mm}
    \pause
    \begin{proof}
        \begin{itemize}
            \item Každý výskyt proměnné - uzel grafu.
            \item Hrany všude, jen ne:
            \begin{itemize}
                \item mezi uzly z téže klauzule
                \item mezi proměnnou a její negací $x$ a $\neg {x}$.
            \end{itemize}
        \end{itemize}
    \end{proof}
    \end{frame}
    
    \begin{frame}{$NP$ úplnost}
    \begin{definition}[$NP$ úplnost]
    Jazyk $B$ je \alert{$NP$ úplný}, pokud je $NP$ a každý jazyk $A\in NP$ je na $B$ polynomiálně převeditelný.
    \end{definition}
    \pause
    
    \begin{theorem}
    Pokud $B$ je NP-úplný a $B\in P$, pak $P=NP$.
    \end{theorem}
    \pause
    
    \begin{proof}
    Přímý důsledek definice polynomiální převoditelnosti a $NP$.
    \end{proof}
    \pause
    
    \begin{theorem}
    Pokud $B$ je NP-úplný a $B\leq_P C$ pro nějaké $C\in NP$, pak $C$ je $NP$-úplný.
    \end{theorem}
    \pause
    
    \begin{proof}
    Převod problému na $B$ dále převedeme na $C$, stačí polynomiální čas.
    \end{proof}
    \end{frame}
    
    
    
    
    
    %\begin{frame}{Redukce}
    %\begin{minipage}{0.57\textwidth}
    %\begin{definition}[Redukce]
    %\end{definition}
    %%\pause
    %\end{minipage}
    %\begin{minipage}{0.01\textwidth}
    %\end{minipage}
    %\begin{minipage}{0.41\textwidth}
    %\includegraphics[width=\textwidth]{reduction.PNG}
    %\end{minipage}
    %\begin{example}
    %\begin{minipage}{0.48\textwidth}
    %Redukce  TM pro $L_d$ na  TM pro $\overline{L_u}$:
    %\includegraphics[width=\textwidth]{LU.PNG}
    %\end{minipage}
    %\begin{minipage}{0.01\textwidth}
    %\end{minipage}
    %\begin{minipage}{0.41\textwidth}
    %\begin{itemize}
        %\item $P_1=$ Nepřijímá TM reprezentovaný $w$ vstupní slovo $w$?
        %\item $P_2=$ Nepřijímá TM reprezentovaný $M$ vstupní slovo $w$?
        %\end{itemize}
    %\end{minipage}
    %\end{example}
    %\end{frame}
    
    
    \begin{frame}{Cook-Levin-ova věta}
    
    \begin{theorem}[Cook-Levin-ova věta]
    $SAT$ je $NP$-úplný.
    \end{theorem}
    \begin{itemize}
        \item idea důkazu úplnosti: převedeme výpočet Turingova stroje na SAT.
    \end{itemize}
    \end{frame}
    
    
    \begin{frame}{}
    \begin{proofs}
    \begin{itemize}
        \item SAT is NP
        
        \begin{itemize}
            \item Nedeterministický TM uhodne správné ohodnocení a v polynomiálním čase ověří, je je pro něj formule pravdivá.
        \end{itemize}
    \pause
     \item SAT je NP-úplný
        
        \begin{itemize}[<+->]
            \item Vezmeme libovolný $L\in NP$
            \item nechť $M$ je nedeterministický TM který rozhoduje jazyk $L$ v čase $n^k-3$ pro nějaké $k$ 
      \item (zde pro jednoduchost NTM s jednostrannou páskou)
            \item Vytvoříme tabulku (tableau) $n^k\times n^k$, každý řádek odpovídá konfiguraci $M$ na vstupu $w$
            \item můžeme předpokládat (opatřit) každou konfiguraci ohraničenou zarážkami $\#$.
        
            \begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}\hline
            \# & $q_0$ & $w_1$ &$w_2$ & \ldots &$w_n$ & \_  &\_  &  \ldots &\# \\\hline
            \# &       &       &       &       &       &       &       &  &\# \\\hline
            \# & \vdots &       &       &       &       &       &       &&\# \\
            \# & \vdots &       &       &       &       &       &       &&\# \\\hline
            \# &       &       &       &       &       &       &       &  &\# \\\hline
                
            \end{tabular}
            \item Výpočet budeme skládat po okýnkách $2\times 3$.
            \begin{tabular}{|c|c|c|}\hline
     & & \\\hline
     & & \\\hline
            \end{tabular}
            
        \end{itemize}
    \end{itemize}
    \end{proofs}
    \end{frame}
    
    
    \begin{frame}{}
    \begin{proof}{}
    \begin{itemize}
        \item Vybraná dovolená okénka, ($a,b,c,d\in \Gamma$)
        
        \begin{tabular}{ccc}
        \\[0.1cm]
         \begin{minipage}{3cm} 
          $\delta(q_1,b)\ni (q_2,c,L)$\\
            \begin{tabular}{|c|c|c|}\hline
              a & $q_1$ & b\\\hline
                $q_2$ & a & c\\\hline
            \end{tabular}
            \end{minipage}
     &
         \begin{minipage}{3cm} 
          $\delta(q_1,b)\ni (q_2,c,R)$\\
            \begin{tabular}{|c|c|c|}\hline
              a & $q_1$ & b\\\hline
                a & c & $q_2$ \\\hline
            \end{tabular}
            \end{minipage}
    
     & 
         \begin{minipage}{3cm} 
          $\delta(q_1,b)\ni (q_2,c,R)$\\
            \begin{tabular}{|c|c|c|}\hline
              d & a & $q_1$ \\\hline
                d & a & c  \\\hline
            \end{tabular}
            \end{minipage}
    \\[0.5cm]
         \begin{minipage}{3cm} 
          přenos beze změny\\
            \begin{tabular}{|c|c|c|}\hline
              \# & a & b\\\hline
              \# & a & b\\\hline
            \end{tabular}
            \end{minipage}
     &
         \begin{minipage}{3cm} 
          $\delta(\_,\_)\ni (q_2,\_,L)$\\
            \begin{tabular}{|c|c|c|}\hline
              a & b & c\\\hline
                a & b & $q_2$ \\\hline
            \end{tabular}
            \end{minipage}
     & 
         \begin{minipage}{3cm} 
          $\delta(\_,\_)\ni (\_,c,L)$\\
            \begin{tabular}{|c|c|c|}\hline
              a & b & d\\\hline
                c & b & d \\\hline
            \end{tabular}
            \end{minipage}
        \\[0.5cm]
    \end{tabular}
    
    \begin{itemize}[<+->]
        \item Přenos beze změny všude, kde není v okolí stav (hlava)
        \item na každém řádku nejvýše jeden stav
        \item okénko musí být částí povoleného přechodu
        \item rozbor technický, udělali za nás jiní.
        \item {\bf Tvrzení:} Pokud je první řádek tabulky počáteční konfigurace a každé okénko je legální, pak každý řádek odpovídá legální konfiguraci dosažitelné jedním krokem z předchozího řádku.
        
        \begin{itemize}
            \item V horním řádku není stav, pak se prostřední symbol musí opsat beze změny.
            \item V horním řádku stav vprostřed: okénko garantuje korektnost přepisu obou stran.
        \end{itemize}
    \end{itemize}
        
        
    \end{itemize}
    \end{proof}
    \end{frame}
    
    
    \begin{frame}{}
    \begin{proofe}
    \begin{itemize}[<+->]
        \item Z tabulky vytvoříme formuli $\phi=\phi_{cell}\ \&\ \phi_{start}\ \&\ \phi_{move}\ \&\  \phi_{accept}$.
        \item pro každé políčko tabulky $(i,j) $ a písmeno $a\in \Gamma\cup Q \cup \{\#\}$ vytvoříme výrokovou proměnnou $x_{i,j,a}$
        $$
        \phi_{cell}=\bigwedge_{1\leq i,j \leq n^k} \left[ \left(\bigvee_{a \in \Gamma\cup Q \cup \{\#\}} x_{i,j,a}\right) \ 
        \&\bigwedge_{s\neq t\in \Gamma\cup Q \cup \{\#\}} (\overline{x_{i,j,s}}\vee \overline{x_{i,j,t}})\right]\hbox{\hspace{0.1cm}   \#právě jedno $a$}
        $$
     \pause
        $$\phi_{start}= x_{1,1,\#}\& x_{1,2,q_0} \& x_{1,3,w_1}\& x_{1,4,w_2}\& \ldots \& x_{1,n+2,w_n}\& x_{1,n+3,\_}\&\ldots \& x_{1,n^k,\#}
        $$
     \pause
    $\phi_{accept}= \bigvee_{1\leq i,j \leq n^k} x_{i,j,q_{accept}}
    $
        \item Celková formule $\phi_{move}$ bude konjunkce, že každé okénko s horním středem na pozici $i,j$ je legální
    $$\phi_{move}=\bigwedge_{1\leq i < n^k, 1<j<n^k} \phi_{i,j}\hbox{\hspace{1cm}   \# okénko $(i,j)$ je legální}
    $$
    \item  legálnost okénka $(i,j)$ zajistíme disjunkcí legálních okének
    $$\phi_{i,j}=\bigvee_{(a_1,\ldots,a_6) \in LEGAL} (x_{i,j-1,a_1}\& x_{i,j,a_2}\& x_{i,j+1,a_3}\& 
    x_{i+1,j-1,a_4}\& x_{i+1,j,a_5}\& x_{i+1,j+1,a_6} )
    $$
    \end{itemize}
    \end{proofe}
    \end{frame}
    
    \begin{frame}{}
    \begin{proofe}
    \begin{itemize}[<+->]
    \item {\bf Tvrzení:} Převod má polynomiální složitost, konkrétně $O(n^{2k}\log n)$.
    \begin{itemize}
        \item $\phi_{cell}\in O(n^{2k})$, procházíme dvojice buněk
        \item $\phi_{start}\in O(n^{2})$, procházíme první řádek
        \item $\phi_{move},\phi_{accept}\in O(n^{2k})$, 
    \begin{itemize}
    %	\item 	$|\delta|$ je pro nás konstanta, protože nezávisí na délce vstupu
    \item počet buněk $n^{2k}$, pro každou konstantní velikost formule.
    \end{itemize}
        
    \end{itemize}
    \item pro šťouraly $\log n$ pro zápis indexu proměnných, jehož délka závisí na $n$.
    \end{itemize}
    \end{proofe}
    \end{frame}
    
    
    \begin{frame}{$3SAT$ je $NP$-úplný.}
    
    \begin{theorem}
    $3SAT$ je $NP$-úplný.
    \end{theorem}
    \pause
    \begin{proof}
        \begin{itemize}[<+->]
            \item Upravíme předchozí převod na formuli $3SAT$.
            \item V CNF je skoro vše, kromě disjunkce okének pohybu, která jsou konjunkcí,
            \begin{itemize}
                \item převedeme do CNF
                \item stačí polynomiální (konstantní) čas - velikost podformule závisí jen na stroji $N$, nikoli na délce vstupu
            \end{itemize}
            \item v krátkých klauzulích zkopírujeme proměnnou
            \item dlouhé rozdělíme zavedením nových proměnných.
        \end{itemize}
    \end{proof}
    
    \end{frame}
    

    \begin{frame}{co-NP, Tautologičnost}
        \begin{definition}
        Jazyk $L\subseteq \Sigma^*$ patří do třídy \alert{co-NP} právě když jeho doplněk $\Sigma^*-L$ patří do NP.
        \end{definition}
        \begin{itemize}
            \item P je částí NP i co-NP.
            \item Domníváme se, že NP-úplné problémy nejsou v co-NP.
            
            \begin{itemize}
                \item pokud $P=NP$, tak jsou.
            \end{itemize}
        \end{itemize}
        \begin{definition}[tautologičnost]
        Problém, zda je daná formule výrokové logiky, nazýváme \alert{tautologičnost TAUT}.
        \end{definition}
        \begin{theorem}
        Problém tautologičnosti TAUT je co-NP.
        \end{theorem}
        \begin{itemize}
            \item Důkaz z pozorování, že doplněk TAUT je SAT a SAT je v NP.
            \item Doplněk SAT je otázka, jestli negace dané formule je tautologie.
        \item Doplněk SAT je co-NP.
        \item SAT rozhoduje všechny formule, tedy i jejich negace.
        \end{itemize}
        \end{frame}
        
        
        \begin{frame}{Prostorová složitost}
        \begin{itemize}
            \item Podobně jako časovou složitost měříme prostor potřebný k výpočtu.
            \item Turingův stroj je jednoduchý a dost podobný reálným počítačům, proto je často používán k definici tříd složitosti.
        \end{itemize}
        \begin{definition}[prostorová složitost]
        Pro deterministický Turingův stroj $M$, který zastaví na každém vstupu, je
        \alert{prostorová složitost} $M$ funkce $f:\mathbb{N}\to \mathbb{N}$, kde $f(n)$ je maximální počet buněk pásky, které  $M$ přečte při jakémkoli vstupu délky $n$.
        
        
        Pro nedeterministický Turingův stroj $M$, který všechy větve výpočtu zastaví na každém vstupu, je 
        \alert{prostorová složitost} $M$ je funkce $f:\mathbb{N}\to \mathbb{N}$, kde $f(n)$ je maximální počet buněk pásky, které  $M$ přečte při jakémkolivstupu délky $n$ na libovolné větvi výpočtu.
        
        \end{definition}
        \end{frame}
        
        \begin{frame}{Třídy prostorové složitosti}
        \begin{definition}[třídy prostorové složitosti]
        Mějme funkci $t: \mathbb{N}\to \mathbb{R}^+$. Definujeme \alert{třídy prostorové složitosti } $SPACE(f(n))$ a $NSPACE(f(n))$: %jakožto množinu všech jazyků, které jsou rozhodnutelné turingovým strojem v~čase $O(t(n))$.
        \begin{itemize}
            \item $SPACE(f(n))=\{L \ |\  L \hbox{je jazyk rozhodnutelný v prostoru $O(f(n))$ deterministickým TM}\}$,
            \item $NSPACE(f(n))=\{L \ |\  L \hbox{je jazyk rozhodnutelný v prostoru $O(f(n))$ nedeterministickým TM}\}$.
        \end{itemize}
        \end{definition}
        
        \begin{theorem}
        $$P \subseteq NP \subseteq PSPACE \subseteq NPSPACE \subseteq EXPTIME = \bigcup_k TIME(2^{n^k})\hbox{.} $$
        \end{theorem}
        
        \end{frame}